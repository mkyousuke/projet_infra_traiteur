# Documentation d’exploitation – Projet Infrastructure & SI : Traiteur

Ce document explique comment utiliser, tester et maintenir les services mis en place dans le cadre du projet client/serveur pour un traiteur, dans un environnement virtualisé.

---

## 1. Accès au site web

Le site web est hébergé localement sur le serveur Windows. Il s’agit d’un site vitrine simple accessible en HTTP.

- **Adresse** : `http://192.168.10.1`
- **Client requis** : Navigateur web (Firefox, Chromium, etc.)
- **Connexion requise** : Être sur le même réseau local (VMnet1)

### ✔ Étapes pour accéder au site :

1. Allumer les deux VMs (serveur et client)
2. Depuis le client (Xubuntu), ouvrir un navigateur
3. Entrer l’adresse : `http://192.168.10.1`
4. La page "Chez le traiteur Ynough" s’affiche

---

## 2. Lancer une sauvegarde manuelle

Le serveur contient un script PowerShell qui archive le dossier du site web (`wwwroot`) dans un fichier compressé.

- **Chemin du script** : `C:\scripts\script_sauvegarde.ps1`
- **Dossier de destination** : `C:\backups`

### ✔ Lancer la sauvegarde à la main :

1. Ouvrir PowerShell en administrateur
2. Taper :
   ```powershell
   cd C:\scripts
   .\script_sauvegarde.ps1
````

3. Un fichier ZIP nommé `backup_YYYY-MM-DD_HH-mm.zip` est créé dans `C:\backups`

---

## 3. Sauvegarde automatique

Le script est exécuté quotidiennement grâce au Planificateur de tâches Windows.

* **Nom de la tâche** : `Sauvegarde site web`
* **Déclencheur** : quotidien, heure configurable
* **Action** :

  ```powershell
  powershell -ExecutionPolicy Bypass -File "C:\scripts\script_sauvegarde.ps1"
  ```

### ✔ Vérifier que la tâche fonctionne :

1. Ouvrir le **Planificateur de tâches**
2. Trouver la tâche `Sauvegarde site web`
3. Clic droit > **Exécuter** pour tester
4. Vérifier que le fichier `.zip` est bien généré dans `C:\backups`

---

## 4. Restaurer une sauvegarde

Pour restaurer le contenu du site web à partir d’une archive `.zip` :

### ✔ Étapes de restauration :

1. Ouvrir le dossier `C:\backups`
2. Copier l’archive souhaitée (ex : `backup_2024-05-02_14-00.zip`)
3. Supprimer le contenu de `C:\inetpub\wwwroot`
4. Extraire l’archive dans `C:\inetpub\wwwroot`
5. Le site est restauré immédiatement (pas besoin de redémarrer IIS)

---

## 5. Tests et maintenance

### ✔ Connexion réseau :

```bash
ping 192.168.10.1     # depuis la VM cliente
```

### ✔ Affichage du site :

* Navigateur > `http://192.168.10.1`

### ✔ Vérification du dossier de sauvegarde :

* Explorer > `C:\backups` → vérifier les fichiers `.zip`

---

## 6. Bonnes pratiques de gestion

* Vérifier l’espace disque sur `C:\backups` régulièrement
* Supprimer les vieilles sauvegardes si besoin
* Tester la restauration après chaque modification importante du site
* Garder une copie externe si possible (clé USB, NAS, etc.)

---

